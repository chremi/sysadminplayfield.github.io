<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2020-02-24T15:20:22-06:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">SysAdmin Playfield</title><subtitle>Short Linux tutorials for RHEL/CentOS</subtitle><entry><title type="html">RHCE - Part1 - Link aggregation: Bonding, teaming</title><link href="http://localhost:4000/rhce/centos7/2020/02/22/rhce-01-bonding-teaming.html" rel="alternate" type="text/html" title="RHCE - Part1 - Link aggregation: Bonding, teaming" /><published>2020-02-22T11:45:00-06:00</published><updated>2020-02-22T11:45:00-06:00</updated><id>http://localhost:4000/rhce/centos7/2020/02/22/rhce-01-bonding-teaming</id><content type="html" xml:base="http://localhost:4000/rhce/centos7/2020/02/22/rhce-01-bonding-teaming.html">&lt;p&gt;Display existing connections:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli c s
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Delete existing connections automatically created by NetworkManager:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli con del &quot;Wired connection 1&quot;
# nmcli con del &quot;Wired connection 2&quot;
# nmcli con del eth0
# nmcli con del eth1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;BONDING&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Create the bonding connection (here, mode 1 is active-backup):&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli con add type bond ifname bond0 con-name bond0 mode 1
or
# nmcli con add type bond ifname bond0 con-name bond0 mode 'active-backup'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create the 2 slave connections, based on the interface name:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli con add type bond-slave ifname eth0 con-name eth0 master bond0
# nmcli con add type bond-slave ifname eth1 con-name eth1 master bond0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Configure bond0 connection:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli con mod bond0 ipv4.addresses &quot;192.168.2.10/24 192.168.2.1&quot; ipv4.dns 192.168.2.200 \  
											ipv4.method manual connection.autoconnect yes
# nmcli con up bond0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When bond0 is started, both slave interfaces are started too.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;TEAMING&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Create the teaming connection:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli con add type team ifname team0 con-name team0 config '{&quot;runner&quot;: {&quot;name&quot;: &quot;activebackup&quot;}}'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create the slave connections:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli con add type team-slave ifname eth0 con-name eth0 master team0
# nmcli con add type team-slave ifname eth1 con-name eth1 master team0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Edit team0 connection:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli con mod team0 ipv4.addresses &quot;192.168.2.20/24 192.168.2.1&quot; ipv4.dns 192.168.2.200 ipv4.method manual connection.autoconnect yes
# nmcli con up eth0
# nmcli con up eth1
# nmcli con up team0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Before starting team0, make sure to start the slave interfaces.&lt;/p&gt;</content><author><name></name></author><summary type="html">Display existing connections:</summary></entry><entry><title type="html">RHCE - Part2 - Directory services: client connection using Kerberos</title><link href="http://localhost:4000/rhce/centos7/2020/02/22/rhce-02-directory-client-kerberos.html" rel="alternate" type="text/html" title="RHCE - Part2 - Directory services: client connection using Kerberos" /><published>2020-02-22T11:30:00-06:00</published><updated>2020-02-22T11:30:00-06:00</updated><id>http://localhost:4000/rhce/centos7/2020/02/22/rhce-02-directory-client-kerberos</id><content type="html" xml:base="http://localhost:4000/rhce/centos7/2020/02/22/rhce-02-directory-client-kerberos.html">&lt;p&gt;kdc = ldap.example.local&lt;br /&gt;
realm = EXAMPLE.LOCAL&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;LDAP KERBEROS CLIENT&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Edit authconfig&lt;/strong&gt; configuration detailed in the RHCSA section &lt;a href=&quot;https://sysadminplayfield.github.io/rhcsa/centos7/2020/02/20/rhcsa-17-sssd.html&quot;&gt;https://sysadminplayfield.github.io/rhcsa/centos7/2020/02/20/rhcsa-17-sssd.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Enable Kerberos authenrication method&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# authconfig --enablekrb5 --krb5kdc=ldap.example.local --krb5realm=EXAMPLE.LOCAL --update
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">kdc = ldap.example.local realm = EXAMPLE.LOCAL</summary></entry><entry><title type="html">RHCE - Part3 - iSCSI: Target and Initiator</title><link href="http://localhost:4000/rhce/centos7/2020/02/22/rhce-04-iscsi.html" rel="alternate" type="text/html" title="RHCE - Part3 - iSCSI: Target and Initiator" /><published>2020-02-22T11:15:00-06:00</published><updated>2020-02-22T11:15:00-06:00</updated><id>http://localhost:4000/rhce/centos7/2020/02/22/rhce-04-iscsi</id><content type="html" xml:base="http://localhost:4000/rhce/centos7/2020/02/22/rhce-04-iscsi.html">&lt;p&gt;Target (server) = srv.example.local&lt;br /&gt;
Initiator (client) = client.example.local&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;TARGET&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Install targetcli&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# yum install -y targetcli
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Enable target&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl enable target
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Enter the CLI to &lt;strong&gt;configure&lt;/strong&gt; the &lt;strong&gt;target&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# targetcli
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Create&lt;/strong&gt; the &lt;strong&gt;backstores&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/&amp;gt; backstores/fileio create file1 /srv/lunfile 100M sparse=true write_back=false
/&amp;gt; backstores/block create block1 /dev/vg/lv_iscsi write_back=false
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Create IQN&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/&amp;gt; iscsi/ create iqn.2020-02.local.example:srv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Create portal&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/&amp;gt; iscsi/iqn.2020-02.local.example:srv/tpg1/portals create
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Create&lt;/strong&gt; &lt;strong&gt;ACL&lt;/strong&gt; (client/&lt;strong&gt;initiator&lt;/strong&gt; configuration):&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/&amp;gt; iscsi/iqn.2020-02.local.example:srv/tpg1/acls create iqn.2020-02.local.example:client
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Create LUNs&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/&amp;gt; iscsi/iqn.2020-02.local.example:srv/tpg1/luns create /backstores/fileio/file1
/&amp;gt; iscsi/iqn.2020-02.local.example:srv/tpg1/luns create /backstores/block/block1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Optional&lt;/strong&gt;: Set &lt;strong&gt;CHAP&lt;/strong&gt; connection and set &lt;strong&gt;username&lt;/strong&gt; and &lt;strong&gt;password&lt;/strong&gt; for the &lt;strong&gt;initiator&lt;/strong&gt; to log onto the target:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/&amp;gt; iscsi/iqn.2020-02.local.example:srv/tpg1/acls/iqn.2020-02.local.example:client set auth userid=user password=pass
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Check target configuration&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/&amp;gt; ls
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Save configuration&lt;/strong&gt; and exit the CLI:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/&amp;gt; saveconfig
/&amp;gt; exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Open&lt;/strong&gt; port &lt;strong&gt;3260/tcp&lt;/strong&gt; in firewall:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# firewall-cmd --permanent --add-port=3260/tcp
# firewall-cmd --reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;INITIATOR&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Install iscsi-initiator-utils&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# yum install -y iscsi-initiator-utils
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Configure initiator name&lt;/strong&gt; in &lt;strong&gt;/etc/iscsi/initiatorname.iscsi&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;
# &lt;b&gt;vi /etc/iscsi/initiatorname.iscsi&lt;/b&gt;
InitiatorName=iqn.2020-02.local.example:client
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Optional&lt;/strong&gt;: configure &lt;strong&gt;CHAP&lt;/strong&gt; settings in &lt;strong&gt;/etc/iscsi/iscsid.conf&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;
# &lt;b&gt;vi /etc/iscsi/iscsid.conf&lt;/b&gt;
[...]
node.session.auth.authmethod = CHAP
[...]
node.session.auth.username = user
node.session.auth.password = pass
[...]
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Enable&lt;/strong&gt; and &lt;strong&gt;start&lt;/strong&gt; &lt;strong&gt;iscsi&lt;/strong&gt; and &lt;strong&gt;iscsid&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl enable iscsi iscsid
# systemctl start iscsi iscsid
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Start target discovery&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# iscsiadm -m discovery -t st -p srv.example.local:3260
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Login&lt;/strong&gt; and connect to the target:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# iscsiadm -m node -T iqn.2020-02.local.example:srv -p srv.example.local:3260 --login
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Check iscsi&lt;/strong&gt; LUNs provided by the target:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsblk -S | grep LIO
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Last step, you can :&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;use the mapped LUNs as LVMs (create a VG and LVs)&lt;/li&gt;
  &lt;li&gt;format these drives/LVs to the required filesystem (xfs, ext4, etc. …)&lt;/li&gt;
  &lt;li&gt;use &lt;strong&gt;blkid&lt;/strong&gt; to retrieve UUIDs, logical names or aliases&lt;/li&gt;
  &lt;li&gt;append the information to &lt;strong&gt;/etc/fstab&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;If&lt;/strong&gt; the &lt;strong&gt;discovery failed&lt;/strong&gt;, &lt;strong&gt;delete files under /var/lib/iscsi/nodes/&lt;/strong&gt;* and &lt;strong&gt;retry&lt;/strong&gt; with &lt;strong&gt;correct&lt;/strong&gt; discovery &lt;strong&gt;parameters&lt;/strong&gt;.&lt;/p&gt;</content><author><name></name></author><summary type="html">Target (server) = srv.example.local Initiator (client) = client.example.local</summary></entry><entry><title type="html">RHCE - Part4 - nfs Kerberos</title><link href="http://localhost:4000/rhce/centos7/2020/02/22/rhce-03-nfs-kerberos.html" rel="alternate" type="text/html" title="RHCE - Part4 - nfs Kerberos" /><published>2020-02-22T11:00:00-06:00</published><updated>2020-02-22T11:00:00-06:00</updated><id>http://localhost:4000/rhce/centos7/2020/02/22/rhce-03-nfs-kerberos</id><content type="html" xml:base="http://localhost:4000/rhce/centos7/2020/02/22/rhce-03-nfs-kerberos.html">&lt;p&gt;Make sure to review RHCSA topic on nfs &lt;a href=&quot;https://sysadminplayfield.github.io/rhcsa/centos7/2020/02/20/rhcsa-18-nfs-samba.html&quot;&gt;https://sysadminplayfield.github.io/rhcsa/centos7/2020/02/20/rhcsa-18-nfs-samba.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Server = srv.example.local
Client = client.example.local&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;NFS SERVER CONFIGURATION&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Create directory&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir /srv/nfskerberos
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Set SELinux context&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# semanage fcontext -at nfs_t &quot;/srv/nfskerberos(/.*)?&quot;
# restorecon -v /srv/nfskerberos
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Edit /etc/exports&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;
# &lt;b&gt;vi /etc/exports&lt;/b&gt;
/srv/nfskerberos client.example.local(sec=krb5p,rw,sync)
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Retrieve keytab file from the KDC&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# wget -O /etc/krb5.keytab ftp://kdc.example.local/pub/srv.keytab
or, if ipa-client is installed
# ipa-getkeytab -s kdc.example.local -p nfs/srv.example.local -k /etc/krb5.keytab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Optional&lt;/strong&gt;: &lt;strong&gt;Enable&lt;/strong&gt; NFS &lt;strong&gt;version 4.2&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;
# &lt;b&gt;vi /et	c/sysconfig/nfs&lt;/b&gt;
[...]
RPCNFSDARGS=&quot;-V 4.2&quot;
[...]
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Enable&lt;/strong&gt; and &lt;strong&gt;start&lt;/strong&gt; &lt;strong&gt;nfs-server&lt;/strong&gt; and &lt;strong&gt;nfs-secure-server&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl enable nfs-server nfs-secure-server
# systemctl start nfs-server nfs-secure-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Allow nfs in firewalld:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# firewall-cmd --permanent --add-service=nfs
# firewall-cmd --reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Optional&lt;/strong&gt;: In some cases, &lt;strong&gt;mountd&lt;/strong&gt; and &lt;strong&gt;rpc-bind&lt;/strong&gt; are required in &lt;strong&gt;firewalld&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;NFS3&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Shared &lt;strong&gt;exports discovery&lt;/strong&gt; from the &lt;strong&gt;client&lt;/strong&gt; in &lt;strong&gt;NFS4&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# firewall-cmd --permanent --add-service={mountd,rpc-bind}
# firewall-cmd --reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;NFS CLIENT CONFIGURATION&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Install nfs-utils&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# yum install -y nfs-utils
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Create mountpoint&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir /mnt/nfs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Retrieve keytab file from the KDC&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# wget -O /etc/krb5.keytab ftp://kdc.example.local/pub/client.keytab
or, if ipa-client is installed
# ipa-getkeytab -s kdc.example.local -p nfs/client.example.local -k /etc/krb5.keytab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Enable&lt;/strong&gt; and &lt;strong&gt;start nfs-secure&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl enable nfs-secure
# systemctl start nfs-secure
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Temporarily mount&lt;/strong&gt; the nfs share:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;For nfs3
# mount -v -t nfs -o vers=3,sec=krb5p,rw,sync srv.example.local:/srv/nfskerberos /mnt/nfs

For nfs4
# mount -v -t nfs4 -o sec=krb5p,rw,sync srv.example.local:/srv/nfskerberos /mnt/nfs

For nfs4.2
# mount -v -t nfs4 -o sec=krb5p,rw,sync srv.example.local:/srv/nfskerberos /mnt/nfs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Permanently mount&lt;/strong&gt; the nfs share by editing &lt;strong&gt;/etc/fstab&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;
# &lt;b&gt;vi /etc/fstab&lt;/b&gt;
[...]
#For nfs3
srv.example.local:/srv/nfskerberos	/mnt/nfs	nfs		vers=3,sec=krb5p,rw,sync	0 0

#For nfs4
srv.example.local:/srv/nfskerberos	/mnt/nfs	nfs		vers=4,sec=krb5p,rw,sync	0 0

#For nfs4.2
srv.example.local:/srv/nfskerberos	/mnt/nfs	nfs		vers=4.2,sec=krb5p,rw,sync	0 0
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Mount&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mount -av
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">Make sure to review RHCSA topic on nfs https://sysadminplayfield.github.io/rhcsa/centos7/2020/02/20/rhcsa-18-nfs-samba.html</summary></entry><entry><title type="html">RHCE - Part5 - Postfix</title><link href="http://localhost:4000/rhce/centos7/2020/02/22/rhce-05-postfix.html" rel="alternate" type="text/html" title="RHCE - Part5 - Postfix" /><published>2020-02-22T10:45:00-06:00</published><updated>2020-02-22T10:45:00-06:00</updated><id>http://localhost:4000/rhce/centos7/2020/02/22/rhce-05-postfix</id><content type="html" xml:base="http://localhost:4000/rhce/centos7/2020/02/22/rhce-05-postfix.html">&lt;p&gt;&lt;strong&gt;NULL CLIENT&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Configure postfix&lt;/strong&gt; by editing &lt;strong&gt;/etc/postfix/main.cf&lt;/strong&gt;, &lt;strong&gt;or&lt;/strong&gt; send configuration from the terminal using &lt;strong&gt;postconf&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# postconf -e 'myhostname=srv.example.local'
# postconf -e 'mydomain=example.local'
# postconf -e 'myorigin=$mydomain'
# postconf -e 'inet_interfaces=loopback-only'
# postconf -e 'mydestination='
# postconf -e 'relayhost=[centralmail.example.local]'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Check&lt;/strong&gt; postfix &lt;strong&gt;configuration&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# postfix check
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Restart postfix&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl restart postfix
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;CENTRAL MAIL SERVER&lt;/strong&gt; (gateway)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Configure postfix&lt;/strong&gt; by editing &lt;strong&gt;/etc/postfix/main.cf&lt;/strong&gt;, &lt;strong&gt;or&lt;/strong&gt; send configuration from the terminal using &lt;strong&gt;postconf&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# postconf -e 'myhostname=centralmail.example.local'
# postconf -e 'mydomain=example.local'
# postconf -e 'myorigin=$mydomain'
# postconf -e 'inet_interfaces=all'
# postconf -e 'mydestination=$myhostname, localhost.$mydomain, localhost, $mydomain'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Check&lt;/strong&gt; postfix &lt;strong&gt;configuration&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# postfix check
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Restart postfix&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl restart postfix
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Allow smtp in firewalld:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# firewall-cmd --permanent --add-service=smtp
# firewall-cmd --reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;TESTS&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Install mailx&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# yum install -y mailx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Send&lt;/strong&gt; a &lt;strong&gt;mail&lt;/strong&gt; &lt;strong&gt;to&lt;/strong&gt; the &lt;strong&gt;root&lt;/strong&gt; user:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# echo test | mailx -s test root
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Monitor&lt;/strong&gt; with &lt;strong&gt;journalctl&lt;/strong&gt; (if the mail is deleted, it has been sent):&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# journalctl -xlf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Check&lt;/strong&gt; the &lt;strong&gt;mail queue&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mailq
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Resend&lt;/strong&gt; a mail &lt;strong&gt;stuck&lt;/strong&gt; in the queue:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# postsuper -r ABCDEFGHI
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Delete&lt;/strong&gt; a mail &lt;strong&gt;stuck&lt;/strong&gt; in the queue:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# postsuper -d ABCDEFGHI
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">NULL CLIENT</summary></entry><entry><title type="html">RHCE - Part6 - mariadb</title><link href="http://localhost:4000/rhce/centos7/2020/02/22/rhce-06-mariadb.html" rel="alternate" type="text/html" title="RHCE - Part6 - mariadb" /><published>2020-02-22T10:30:00-06:00</published><updated>2020-02-22T10:30:00-06:00</updated><id>http://localhost:4000/rhce/centos7/2020/02/22/rhce-06-mariadb</id><content type="html" xml:base="http://localhost:4000/rhce/centos7/2020/02/22/rhce-06-mariadb.html">&lt;p&gt;Server: srv.example.local&lt;br /&gt;
Client: 192.168.2.20/24&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;MARIADB SERVER&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Install mariadb&lt;/strong&gt; and &lt;strong&gt;mariadb-server&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# yum install -y mariadb mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Enable&lt;/strong&gt; and &lt;strong&gt;start mariadb&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl enable mariadb
# systemctl start mariadb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Run mysql_secure_installation&lt;/strong&gt; to set the root password, remove anonymous users and test database:&lt;/p&gt;

&lt;pre&gt;
# &lt;b&gt;mysql_secure_installation&lt;/b&gt;
Enter current password for root (enter for none): &lt;b&gt;enter&lt;/b&gt;
Set root password? [Y/n] &lt;b&gt;enter&lt;/b&gt;
New password: &lt;b&gt;password1&lt;/b&gt;
Re-enter new password: &lt;b&gt;password1&lt;/b&gt;
Remove anonymous users? [Y/n] &lt;b&gt;enter&lt;/b&gt;
Disallow root login remotely? [Y/n] &lt;b&gt;enter&lt;/b&gt;
Remove test database and access to it? [Y/n] &lt;b&gt;enter&lt;/b&gt;
Reload privilege tables now? [Y/n] &lt;b&gt;enter&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Login&lt;/strong&gt; as &lt;strong&gt;root&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mysql -uroot -p
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Display databases&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;
MariaDB[(none)]&amp;gt; &lt;b&gt;show databases;&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;Create a database, a table and insert data:&lt;/p&gt;

&lt;pre&gt;
MariaDB[(none)]&amp;gt; &lt;b&gt;create database db1;&lt;/b&gt;
MariaDB[(none)]&amp;gt; &lt;b&gt;use db1;&lt;/b&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;create table table1(id INT(10) unsigned, name VARCHAR(20), age INT(10));&lt;/b&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;insert into table1(id,name,age) values (1,&quot;person1&quot;,25);&lt;/b&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;insert into table1(id,name,age) values (2,&quot;person2&quot;,55);&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Display table&lt;/strong&gt; structure:&lt;/p&gt;

&lt;pre&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;describe table1;&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Get items&lt;/strong&gt; from table1:&lt;/p&gt;

&lt;pre&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;select * from table1;&lt;/b&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;select name,age from table1;&lt;/b&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;select name,age from table1 where age=25;&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Create&lt;/strong&gt; a &lt;strong&gt;user&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;create user alice@192.168.2.20 identified by 'password2';&lt;/b&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;grant all on db1.* to alice@192.168.2.20;&lt;/b&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;flush privileges;&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Change password&lt;/strong&gt; for alice:&lt;/p&gt;

&lt;pre&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;set password for alice@192.168.2.20 = password('newpassword2');&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Display&lt;/strong&gt; database &lt;strong&gt;users&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;select host,name,password from mysql.user;&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Delete user&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;drop user alice@192.168.2.20;&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Display variables&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;show variables like 'port';&lt;/b&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;show variables like 'datadir';&lt;/b&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;show variables where variable_name='port' or variable_name='datadir';&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Exit&lt;/strong&gt; the &lt;strong&gt;CLI&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;
MariaDB[db1]&amp;gt; &lt;b&gt;exit&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Allow port 3306&lt;/strong&gt; in firewalld:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# firewall-cmd --permanent --add-port=3306/tcp
# firewall-cmd --reload

Or, use a rich rule:
# firewall-cmd --permanent --add-rich-rule 'rule family=ipv4 source address=192.168.2.20 port port=3306 protocol=tcp accept'
# firewall-cmd --reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Change listening port&lt;/strong&gt; to &lt;strong&gt;8888/tcp&lt;/strong&gt; and &lt;strong&gt;adjust SELinux context&lt;/strong&gt; on port 8888/tcp:&lt;/p&gt;

&lt;pre&gt;
# &lt;b&gt;semanage port -at -mysqld_port_t 8888 -p tcp&lt;/b&gt;
# &lt;b&gt;vi /etc/my.cnf&lt;/b&gt;
[mysqld]
&lt;b&gt;port=8888&lt;/b&gt;
[...]
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Restart mariadb&lt;/strong&gt;, and &lt;strong&gt;update firewall rules&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl restart mariadb
# firewall-cmd --permanent --remove-port=3306/tcp
# firewall-cmd --permanent --add-port=8888/tcp
# firewall-cmd --reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Change&lt;/strong&gt; mariadb &lt;strong&gt;datadir&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;
# systemctl stop mariadb
# mkdir /srv/mariadb
# semanage fcontext -at mysqld_db_t &quot;/srv/mariadb(/.*)?&quot;
# restorecon -v /srv/mariadb
# chown mysql: /srv/mariadb
# cp -Rp /var/lib/mysql/* /srv/mariadb/

# &lt;b&gt;vi /etc/my.cnf&lt;/b&gt;
[mysqld]
[...]
&lt;b&gt;#&lt;/b&gt;datadir=/var/lib/mysql
&lt;b&gt;datadir=/srv/mariadb&lt;/b&gt;
[...]
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Check&lt;/strong&gt; owner, &lt;strong&gt;permissions&lt;/strong&gt; and &lt;strong&gt;SELinux contexts&lt;/strong&gt; of the new datadir:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ls -alZ /srv/mariadb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Start mariadb&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl start mariadb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;MARIADB REMOTE CLIENT&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Install mariadb&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# yum install -y mariadb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Connect&lt;/strong&gt; to a &lt;strong&gt;remote mariadb server&lt;/strong&gt; on &lt;strong&gt;port 8888/tcp&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mysql -ualice -p -hsrv.example.local -P8888
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">Server: srv.example.local Client: 192.168.2.20/24</summary></entry><entry><title type="html">RHCSA - Part1 - Reset root password</title><link href="http://localhost:4000/rhcsa/centos7/2020/02/20/rhcsa-01-reset-root-password.html" rel="alternate" type="text/html" title="RHCSA - Part1 - Reset root password" /><published>2020-02-20T23:00:40-06:00</published><updated>2020-02-20T23:00:40-06:00</updated><id>http://localhost:4000/rhcsa/centos7/2020/02/20/rhcsa-01-reset-root-password</id><content type="html" xml:base="http://localhost:4000/rhcsa/centos7/2020/02/20/rhcsa-01-reset-root-password.html">&lt;p&gt;If the root password is lost, you need to interrupt the boot process and gain access to a chrooted environment.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
At &lt;strong&gt;grub2&lt;/strong&gt; screen, press “&lt;strong&gt;e&lt;/strong&gt;” to &lt;strong&gt;edit&lt;/strong&gt; the configuration.&lt;br /&gt;
At the end of the line starting with “&lt;strong&gt;linux16&lt;/strong&gt;”, append the following:&lt;/p&gt;

&lt;pre&gt;
&lt;b&gt;[...]&lt;/b&gt;
linux16 /vmlinuz-3.10.0-123.el7.x86_64 root=UUID=[...] ro rd.lvm.lv=centos/swap \  
vconsole.font=latarcyrheb-sun16 rd.lvm.lv=centos/root crashkernel=auto vconsole.keymap=us \  
rhgb quiet LANG=en_US.UTF-8 &lt;b&gt;rd.break enforcing=0&lt;/b&gt;
&lt;b&gt;[...]&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;“&lt;strong&gt;rd.break&lt;/strong&gt;” interrupts the boot process.&lt;br /&gt;
“&lt;strong&gt;enforcing=0&lt;/strong&gt;” sets temporarily SELinux to “Permissive”.&lt;/p&gt;

&lt;p&gt;Proceed with &lt;strong&gt;Ctrl+x&lt;/strong&gt; to continue the boot process with the new configuration.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;Mount&lt;/strong&gt; the /sysroot folder with &lt;strong&gt;read&lt;/strong&gt; and &lt;strong&gt;write&lt;/strong&gt; access, and change root (&lt;strong&gt;chroot&lt;/strong&gt;) to set the new root password:&lt;/p&gt;

&lt;pre&gt;
switch_root:/# &lt;b&gt;mount -o rw,remount /sysroot&lt;/b&gt;
switch_root:/# &lt;b&gt;chroot /sysroot&lt;/b&gt;
sh-4.2# &lt;b&gt;passwd&lt;/b&gt;
	Enter new root password:.....
	Confirm new root password:.....
sh-4.2# &lt;b&gt;exit&lt;/b&gt;
switch_root:/# &lt;b&gt;logout&lt;/b&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;
The boot process is finished.&lt;br /&gt;
Log in as root with the new password, and reset the SELinux context of /etc/shadow :&lt;/p&gt;

&lt;pre&gt;
root@localhost# &lt;b&gt;restorecon -v /etc/shadow&lt;/b&gt;
root@localhost# &lt;b&gt;reboot&lt;/b&gt;
&lt;/pre&gt;</content><author><name></name></author><summary type="html">If the root password is lost, you need to interrupt the boot process and gain access to a chrooted environment.</summary></entry><entry><title type="html">RHCSA - Part2 - Configure network interface</title><link href="http://localhost:4000/rhcsa/centos7/2020/02/20/rhcsa-02-configure-netowrk-interface-nmcli.html" rel="alternate" type="text/html" title="RHCSA - Part2 - Configure network interface" /><published>2020-02-20T22:00:01-06:00</published><updated>2020-02-20T22:00:01-06:00</updated><id>http://localhost:4000/rhcsa/centos7/2020/02/20/rhcsa-02-configure-netowrk-interface-nmcli</id><content type="html" xml:base="http://localhost:4000/rhcsa/centos7/2020/02/20/rhcsa-02-configure-netowrk-interface-nmcli.html">&lt;p&gt;We assume the following:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;OS: CentOS 7.0&lt;/li&gt;
  &lt;li&gt;Static IP address: 192.168.2.100/24&lt;/li&gt;
  &lt;li&gt;Gateway: 192.168.2.200 (you can also choose a public DNS server such as google 8.8.8.8)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;
Although it is still possible to manually edit the network configuration files in &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/sysconfig/network-scripts&lt;/code&gt; directory, this is not the preferred way anymore.&lt;br /&gt;
If you still wish to manually modify the files, do not forget to execute &lt;code class=&quot;highlighter-rouge&quot;&gt;nmcli con reload&lt;/code&gt; to update changes.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
Let’s start the configuration:&lt;/p&gt;

&lt;p&gt;Display network configurations with &lt;strong&gt;nmcli&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli c s
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the command doesn’t display any connection and you don’t know the name of the interface, use &lt;code class=&quot;highlighter-rouge&quot;&gt;ip a&lt;/code&gt; to get it.&lt;/p&gt;

&lt;p&gt;Create the new connection:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli con add type ethernet ifname eth0 con-name eth0
# nmcli con mod eth0 ipv4.addresses &quot;192.168.2.100/24 192.168.2.1&quot; \
 			ipv4.dns 192.168.2.200 \
 			ipv4.method manual \
 			connection.autoconnect yes
# nmcli con up eth0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test the new connection:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ping -I eth0 192.168.2.200
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">We assume the following: OS: CentOS 7.0 Static IP address: 192.168.2.100/24 Gateway: 192.168.2.200 (you can also choose a public DNS server such as google 8.8.8.8)</summary></entry><entry><title type="html">RHCSA - Part3 - systemd targets</title><link href="http://localhost:4000/rhcsa/centos7/2020/02/20/rhcsa-03-systemd-targets.html" rel="alternate" type="text/html" title="RHCSA - Part3 - systemd targets" /><published>2020-02-20T20:00:01-06:00</published><updated>2020-02-20T20:00:01-06:00</updated><id>http://localhost:4000/rhcsa/centos7/2020/02/20/rhcsa-03-systemd-targets</id><content type="html" xml:base="http://localhost:4000/rhcsa/centos7/2020/02/20/rhcsa-03-systemd-targets.html">&lt;p&gt;With &lt;strong&gt;SystemV&lt;/strong&gt;, we talked about &lt;strong&gt;runlevels&lt;/strong&gt;.&lt;br /&gt;
With &lt;strong&gt;systemd&lt;/strong&gt;, we talk about &lt;strong&gt;targets&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Relationship between runlevels and targets:&lt;/p&gt;

&lt;pre&gt;
&lt;b&gt;Runlevel		Target				Description&lt;/b&gt;
0	runlevel0.target, poweroff.target	Power off
1	runlevel1.target, rescue.target		Non-graphical single-user
2,3,4	runlevel[234].target, multi-user.target	Non-graphical multi-user
5 	runlevel5.target, graphical.target	Graphical multi-user
6 	runlevel6.target, reboot.target		Reboot
&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;Check&lt;/strong&gt; the system’s current &lt;strong&gt;default target&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # systemctl get-default
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Set&lt;/strong&gt; the &lt;strong&gt;default target&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # systemctl set-default multi-user.target
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you wish to &lt;strong&gt;switch immediately&lt;/strong&gt; to &lt;strong&gt;rescue.target&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # systemctl isolate rescue
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">With SystemV, we talked about runlevels. With systemd, we talk about targets.</summary></entry><entry><title type="html">RHCSA - Part4 - SELinux</title><link href="http://localhost:4000/rhcsa/centos7/2020/02/20/rhcsa-04-selinux.html" rel="alternate" type="text/html" title="RHCSA - Part4 - SELinux" /><published>2020-02-20T17:30:40-06:00</published><updated>2020-02-20T17:30:40-06:00</updated><id>http://localhost:4000/rhcsa/centos7/2020/02/20/rhcsa-04-selinux</id><content type="html" xml:base="http://localhost:4000/rhcsa/centos7/2020/02/20/rhcsa-04-selinux.html">&lt;p&gt;&lt;strong&gt;SElinux&lt;/strong&gt; configuration file is &lt;strong&gt;/etc/selinux/config&lt;/strong&gt;.&lt;br /&gt;
In this file you can set the default configuration such as the mode (&lt;strong&gt;enforcing&lt;/strong&gt;, &lt;strong&gt;permissive&lt;/strong&gt;, &lt;strong&gt;disabled&lt;/strong&gt;) and the protection type (&lt;strong&gt;targeted&lt;/strong&gt;, &lt;strong&gt;minimum&lt;/strong&gt;, &lt;strong&gt;mls&lt;/strong&gt;)&lt;/p&gt;

&lt;p&gt;When enabled, SELinux can be in Permissive mode or Enforcing mode.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
Check current mode for SELinux:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # getenforce
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If SELinux current mode is “Enforcing”, you can &lt;strong&gt;temporarily&lt;/strong&gt; set it to “&lt;strong&gt;Permissive&lt;/strong&gt;”:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # setenforce permissive
or
 # setenforce 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or else, if it is set to “Permissive” and you want to &lt;strong&gt;temporarily&lt;/strong&gt; set it to “&lt;strong&gt;Enforcing&lt;/strong&gt;”:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # setenforce enforcing
or
 # setenforce 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
If SELinux is disabled, &lt;code class=&quot;highlighter-rouge&quot;&gt;setenforce&lt;/code&gt; will not work because it requires relabeling the whole filesystem. You can force a relabel with the following command:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;touch /.autorelabel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To &lt;strong&gt;permanently&lt;/strong&gt; set an SELinux mode (&lt;strong&gt;persists across reboots&lt;/strong&gt;), &lt;strong&gt;edit&lt;/strong&gt; the configuration file &lt;strong&gt;/etc/selinux/config&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;SEMANAGE&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;semanage&lt;/strong&gt; tool is not present in the minimal install of CentOS 7, we need to install it.&lt;/p&gt;

&lt;p&gt;If you can’t remember what package provides &lt;strong&gt;semanage&lt;/strong&gt; tool, and let’s install it:&lt;/p&gt;

&lt;pre&gt;
# &lt;b&gt;yum provides */semanage&lt;/b&gt;
    [...]
    policycoreutils-python
    setroubleshoot-server
    [...]
&lt;/pre&gt;

&lt;p&gt;You can install either &lt;strong&gt;setroubleshoot-server&lt;/strong&gt; or &lt;strong&gt;policycoreutils-python&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# yum install -y setroubleshoot-server
or
# yum install -y policycoreutils-python
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;CONTEXTS ON FILES/DIRECTORIES&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;List&lt;/strong&gt; available contexts for admin_home:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# semanage fcontext -l | grep admin_home
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Retreive SELinux context&lt;/strong&gt; for /root folder using ls with &lt;strong&gt;-Z&lt;/strong&gt; option:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ls -ldZ /root
    dr-xr-x---. root root system-u:object_r:admin_home_t:s0 /root
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create &lt;code class=&quot;highlighter-rouge&quot;&gt;/custom_home&lt;/code&gt; folder, and &lt;strong&gt;set&lt;/strong&gt; “&lt;strong&gt;admin_home_t&lt;/strong&gt;” &lt;strong&gt;context&lt;/strong&gt; on it using &lt;strong&gt;semanage&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir /custom_home
# semanage fcontext -a -t admin_home_t &quot;/custom_home(/.*)?&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Apply/Update&lt;/strong&gt; the new &lt;strong&gt;context&lt;/strong&gt; (-v option is for verbose) and check:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# restorecon -v /custom_home
# ls -ldZ /custom_home
    dr-xr-x---. root root unconfined_u:object_r:admin_home_t:s0 /custom_home
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;CONTEXTS ON PORTS&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;List&lt;/strong&gt; available contexts for ssh:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;semanage port -l | grep ssh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Allow&lt;/strong&gt; listening on an &lt;strong&gt;unconventional&lt;/strong&gt; &lt;strong&gt;port&lt;/strong&gt; for ssh in SELinux:&lt;/p&gt;

&lt;pre&gt;
&lt;b&gt;Add context&lt;/b&gt; on a port:
# semanage port -&lt;b&gt;a&lt;/b&gt;t ssh_port_t 2222 -p tcp

or, if you need to &lt;b&gt;modify&lt;/b&gt; the &lt;b&gt;default context&lt;/b&gt;:
# semanage port -&lt;b&gt;m&lt;/b&gt;t ssh_port_t 2222 -p tcp

or, if you need to &lt;b&gt;delete&lt;/b&gt; the &lt;b&gt;context&lt;/b&gt;:
# semanage port -&lt;b&gt;d&lt;/b&gt;t ssh_port_t 2222 -p tcp
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Edit&lt;/strong&gt; &lt;strong&gt;/etc/ssh/sshd_config&lt;/strong&gt; to add listening on &lt;strong&gt;port 2222&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;
# &lt;b&gt;vi /etc/ssh/sshd_config&lt;/b&gt;
	[...]
	Port 22
	&lt;b&gt;Port 2222&lt;/b&gt;
	[...]
	&lt;b&gt;PermitRootLogin yes&lt;/b&gt;
	[...]
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Restart sshd&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl restart sshd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Allow&lt;/strong&gt; access in &lt;strong&gt;firewalld&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# firewall-cmd --permanent --add-port=2222/tcp
# firewall-cmd --reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;BOOLEANS&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;List&lt;/strong&gt; all &lt;strong&gt;selinux booleans&lt;/strong&gt; related to nfs:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# getsebool -a | grep httpd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Enable **temporarily&lt;/strong&gt; a &lt;strong&gt;boolean&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# setsebool httpd_can_sendmail on
or
# setsebool httpd_can_sendmail 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Disable&lt;/strong&gt; &lt;strong&gt;temporarily&lt;/strong&gt; a &lt;strong&gt;boolean&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# setsebool httpd_can_sendmail off
or
# setsebool httpd_can_sendmail 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Enable&lt;/strong&gt; &lt;strong&gt;permanently&lt;/strong&gt; a &lt;strong&gt;boolean&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# setsebool -P httpd_can_sendmail on
or
# setsebool -P httpd_can_sendmail 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">SElinux configuration file is /etc/selinux/config. In this file you can set the default configuration such as the mode (enforcing, permissive, disabled) and the protection type (targeted, minimum, mls)</summary></entry></feed>